webpackJsonp([1],[,,function(t,e,i){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}var n=[[[[1],[1],[1],[1]],[[1,1,1,1]]],[[[1,0],[1,0],[1,1]],[[1,1,1],[1,0,0]],[[1,1],[0,1],[0,1]],[[0,0,1],[1,1,1]]],[[[0,1,0],[1,1,1]],[[1,0],[1,1],[1,0]],[[1,1,1],[0,1,0]],[[0,1],[1,1],[0,1]]],[[[1,1],[1,1]]],[[[1]]]];e.a={name:"app",data:function(){return{figure:{x:0,y:0,data:{},figureIndex:0,variantIndex:0},table:[[0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0]],rows:15,height:8,width:8,score:0}},created:function(){var t=this;this.genFigure(),this.printFigure(),setInterval(function(){return t.keyDown()},1e3),addEventListener("keydown",function(e){switch(e.keyCode||e.which){case 37:return t.keyLeft();case 38:return t.rotateFigure();case 39:return t.keyRight();case 40:return t.keyDown()}})},computed:{tableHeight:function(){return Object.keys(this.table).length},tableWidth:function(){return this.table[0].length},figureHeight:function(){return this.figure.data.length},figureWidth:function(){return this.figure.data[0].length},x:function(){return this.figure.x},y:function(){return this.figure.y},data:function(){return this.figure.data},figureIndex:function(){return this.figure.figureIndex},figureVariantIndex:function(){return this.figure.variantIndex}},methods:{genFigure:function(){var t=Math.floor(Math.random()*n.length);this.figure={x:parseInt(this.tableWidth/2-1,10),y:0,data:n[t][0],figureIndex:t,variantIndex:0}},keyDown:function(){var t=Object.assign({},this.figure);t.y++,this.canMoveDown(t)?(console.log({figure:t,thisFigure:this.figure}),this.clearFigure(this.figure),this.figure=t):(this.checkScore(),this.genFigure()),this.printFigure()},keyRight:function(){var t=Object.assign({},this.figure);t.x++,this.canMoveRight(t)&&(this.clearFigure(this.figure),this.figure=t),this.printFigure()},keyLeft:function(){var t=Object.assign({},this.figure);t.x--,this.canMoveLeft(t)&&(this.clearFigure(this.figure),this.figure=t),this.printFigure()},clearFigure:function(t){for(var e=t.x,i=t.y,r=t.data,n=Object.assign({},this.table),a=0;a<r.length;a++)for(var s=0;s<r[a].length;s++)n[i+a][e+s]=0;this.table=n},printFigure:function(){for(var t=this.figure,e=t.x,i=t.y,r=t.data,n=Object.assign({},this.table),a=0;a<r.length;a++)for(var s=0;s<r[a].length;s++)n[i+a][e+s]=r[a][s];this.table=n},canMoveLeft:function(t){var e=t.x,i=t.y,r=t.data,n=this.table;if(e<0)return!1;for(var a=0;a<r.length;a++)if(1==n[i+a][e])return!1;return!0},canMoveRight:function(t){var e=t.x,i=t.y,r=t.data,n=this.table,a=this.tableWidth,s=this.figureWidth;if(e+s>a)return!1;for(var u=0;u<r.length;u++)if(1===n[i+u][e+s])return!1;return!0},canMoveDown:function(){var t=this.x,e=this.y,i=this.data,r=this.figureHeight,n=this.tableHeight,a=this.table,s=e+r;if(e+r>=n)return!1;for(var u=0;u<i[r-1].length;u++)if(1==a[s][t+u])return!1;return!0},rotateFigure:function(){var t=this.figure,e=this.table,i=this.figureIndex,a=this.figureVariantIndex,s=this.y,u=this.x,h=this.tableHeight,o=this.tableWidth;this.clearFigure(t),a=(a+1)%n[i].length;for(var f=[].concat(r(n[i][this.figure.variantIndex])),c=0;c<f.length;c++)for(var g=0;g<f[c].length;g++)if(s+c>=h||u+g>=o||1===e[s+c][u+g]&&0!==e[s+c][u+g])return void this.printFigure();this.figure.variantIndex=a,this.figure.data=f,this.printFigure()},checkScore:function(){for(var t=this.table,e=this.tableWidth,i=this.tableHeight,r=0;r<i;r++){for(var n=!0,a=0;a<e&&n;a++)n=1==t[r][a]&&n;n&&this.removeRow(r)}},removeRow:function(t){this.score++;for(var e=this.table,i=this.tableWidth,r=(this.tableHeight,0);r<i;r++){e[t][r]=0;for(var n=t;n>=0;n--)e[n][r]=n-1<0?0:e[n-1][r]}this.checkScore()}}}},function(t,e,i){i(4),i(6),t.exports=i(11)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(5),n=i.n(r);n.a.install({onUpdateReady:function(){n.a.applyUpdate()}})},,function(t,e,i){window.Promise||(window.Promise=i(7)),Object.assign=i(10)},,,,,function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(12),n=i(13);r.a.config.productionTip=!1,new r.a({el:"#app",render:function(t){return t(n.a)}})},,function(t,e,i){"use strict";function r(t){i(14)}var n=i(2),a=i(16),s=i(15),u=r,h=s(n.a,a.a,!1,u,null,null);e.a=h.exports},function(t,e){},,function(t,e,i){"use strict";var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"},on:{keyup:function(e){t.keyDown()}}},[t._m(0),t._v(" "),i("div",[t._v("Score: "+t._s(t.score))]),t._v(" "),i("div",{staticClass:"table"},t._l(t.table,function(e){return i("div",{staticClass:"row"},t._l(e,function(e,r){return i("div",{staticClass:"cell",class:{filled:e},style:{height:t.height+"px",width:t.width+"px"}})}))}))])},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sourceCode"},[i("a",{attrs:{href:"https://github.com/sergiix/tetris-vue",target:"_blank"}},[t._v("Source code")])])}],a={render:r,staticRenderFns:n};e.a=a}],[3]);
//# sourceMappingURL=client.6e39fa77.js.map